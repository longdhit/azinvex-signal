$("#pushSignal").submit(function(b){$("#loading").show();b.preventDefault();var a=$(this);b=a.find("select[name='symbol']").val();var c=a.find("input[name='type']:checked").val(),d=a.find("input[name='stoploss']").val(),f=a.find("input[name='takeprofit']").val(),a=a.attr("action");b=$.post(a,{symbol:b,type:c,stoploss:d,takeprofit:f});b.done(function(b){$("#loading").hide();$("#noti-error").empty();console.log(b.signal);var a=b.signal;b=a.typeSignal;var c=a.openPrice,d=a.stoploss,f=a.takeprofit,e=
a.startAt,h=a.symbol,a=a.ticket;moment(e).fromNow();var e=moment(e).fromNow(),g="BUY";b&&(g="SELL");$("#signalActive").append('\n       <tr id="'+a+'">\n       <td>'+a+"</td>\n       <td>"+g+"</td>\n       <td>"+h+"</td>\n       <td >"+c+'</td>\n       <td id="sl-'+a+'">'+d+'</td>\n       <td class="tp-'+a+'">'+f+"</td>\n       <td> "+e+'</td>\n       <td>\n       <a id="'+a+'" data-href="/edit/'+a+'" class="stop-signal button is-success">S\u1eeda l\u1ec7nh</button>\n     </td>\n       <td><a id="'+
a+'" data-href="/close/'+a+'" class="stop-signal button is-danger">T\u1eaft L\u1ec7nh</button></td>\n       </tr>')});b.fail(function(a){$("#loading").hide();$("#pushSignal").append('<div class="noti-error notification is-danger">\n            Error '+a.responseJSON.error_code+". Please try again !\n          </div>")})});
$("body").on("click",".stop-signal",function(){$("#loading").show();$("#noti-error").remove();$(this).attr("id");var b=$(this).data("href"),b=$.get(b);b.done(function(a){$("#loading").hide();$("#"+a.signal).remove()});b.fail(function(a){$("#loading").hide();$("#pushSignal").append('<div id="noti-error"><div class="notification is-danger">\n            Error. Please try again !\n          </div></div>')})});
$(document).ready(function(){$("body").on("click",".modify-signal",function(){var b=$(this).attr("id"),a=$("tr#"+b+" td")[4].innerHTML.trim(),c=$("tr#"+b+" td")[5].innerHTML.trim(),d=$("tr#"+b+" td")[2].innerHTML.trim();$('input[name="stoploss"]').val(a);$('input[name="takeprofit"]').val(c);$('select[name="symbol"]').val(d);$("select[name='symbol']").attr("disabled",!0);$("input[name='type']").attr("disabled",!0);$("#ban_lenh").addClass("is-hidden");$("#sua_lenh").data("id",b);$("#sua_lenh").removeClass("is-hidden");
$("#huy_sua").removeClass("is-hidden")});$("#sua_lenh").click(function(b){$("#loading").show();b.preventDefault();var a=$(this).data("id"),c=$('input[name="stoploss"]').val(),d=$('input[name="takeprofit"]').val();url="/edit/"+a;b=$.post(url,{stoploss:c,takeprofit:d});b.done(function(b){$("#loading").hide();$("#noti-error").empty();$("tr#"+a+" td#sl-"+a).text(c);$("tr#"+a+" td#tp-"+a).text(d)});b.fail(function(a){$("#loading").hide();$("#pushSignal").append('<div class="noti-error notification is-danger">\n          Error '+
a.responseJSON.error_code+". Please try again !\n        </div>")})});$("body").on("click","#huy_sua",function(){$('input[name="stoploss"]').val(0);$('input[name="takeprofit"]').val(0);$("select[name='symbol']").attr("disabled",!1);$("input[name='type']").attr("disabled",!1);$("#ban_lenh").removeClass("is-hidden");$("#sua_lenh").addClass("is-hidden");$("#huy_sua").addClass("is-hidden")})});
